<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="UTF-8">
        <title>Le jeu du Pong</title>
    </head>
    <script>
        (function() {

            // début du code isolé
            var vendors = ['ms', 'moz', 'webkit', 'o'];
            for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
                window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];
                window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame']
                || window[vendors[x] + 'CancelRequestAnimationFrame'];
            }

            var requestAnimId;
            var canvasTerrainContext;
            var terrainLongueur = 800;
            var terrainLargeur = 600;
            var filetLargeur = 6;
            var couleurTerrain = "#000000";
            var couleurFilet = "#FFFFFF";

            var dessinerTerrain = function() {
                //Le fond noir
                canvasTerrainContext.fillStyle = couleurTerrain;
                canvasTerrainContext.fillRect(0, 0, terrainLongueur, terrainLargeur);

                //Le terrain
                canvasTerrainContext.fillStyle = couleurFilet;
                canvasTerrainContext.fillRect(terrainLongueur/2 - terrainLargeur/2, 0, filetLargeur, terrainLargeur);
            }

            var initialisation = function() {
                var canvasTerrain = window.document.createElement("canvas");
                canvasTerrain.style.position = "absolute";
                canvasTerrain.style.zIndex = 1;
                canvas.style.background = couleurTerrain;
                canvasTerrain.width = terrainLongueur;
                canvasTerrain.height = terrainLargeur;
                document.body.appendChild(canvasTerrain);
                canvasTerrainContext = canvas.getContext('2d');

                dessinerTerrain();
                requestAnimId = window.requestAnimationFrame(principale);
            }

            var principale = function() {
                requestAnimId = window.requestAnimationFrame(principale);
            }

            var creerCanvasContext = function(name, width, height, zindex, color){
                var canvas = window.document.createElement("canvas");
                canvas.id = name;
                canvas.style.position = "absolute";

                if(color != undefined){
                    canvas.style.background = color;
                }

                canvas.style.zIndex = zindex;
                canvas.width = widht;
                canvas.height = height;
                document.body.appendChild(canvas);

                return canvas.getContext('2d');
            }

            window.onload = initialisation();
        })();
    </script>
    <body>
        <div class="positionTerrain">
            <h1>PONG</h1>
            <canvas id="canvas" width="400" height="600" style="background-color: #000000;">alternate content</canvas>
            <canvas id="canvas2" width="400" height="600" style="background-color: #000000;">alternate content</canvas>
        </div>
    </body>
</html>

